{% extends "base.html" %}
{% block content %}
<div class="bg-white shadow rounded-xl p-6">
  <h1 class="text-2xl font-semibold mb-4">Admin</h1>

  {% if not authed %}
    {% if error %}
      <div class="bg-red-100 text-red-700 p-2 rounded mb-4">{{ error }}</div>
    {% endif %}
    <form method="post" class="space-y-4">
      <input type="password" name="code" placeholder="Admin code" class="border rounded w-full p-3" required>
      <button class="bg-gray-900 hover:bg-black text-white px-4 py-2 rounded">Enter</button>
    </form>
  {% else %}
    {% if error %}
      <div class="bg-red-100 text-red-700 p-2 rounded mb-4">{{ error }}</div>
    {% endif %}
    {% if msg %}
      <div class="bg-emerald-100 text-emerald-700 p-2 rounded mb-4">{{ msg }}</div>
    {% endif %}
    <p class="text-gray-600 mb-2">
      Edit the tasks JSON below. Structure: {"weeks": {"1":[[...day1 tasks...],[...day2...],...],"2":[...]}}
    </p>
    <form method="post">
      <textarea name="tasks_json" rows="20" class="border rounded w-full p-3 font-mono">{{ tasks_json }}</textarea>
      <div class="mt-3">
        <button class="bg-gray-900 hover:bg-black text-white px-4 py-2 rounded">Save</button>
      </div>
    </form>
  {% endif %}
</div>
{% endblock %}
